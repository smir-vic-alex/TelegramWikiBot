# Telegram bot "Гид по Википедии"
Бот, который по умолчанию ищет статьи в англоязычной Википедии
## Getting Started
Данные инструкции позволят Вам копировать проект и запустить на своей локальной машине. 
### Requirements
Требуется jdk8, maven 3.x
### Installing
Склонировать проект
```
git clone https://github.com/smir-vic-alex/TelegramWikiBot.git
```
### Running
Выполнить maven команду
```
mvn clean install jetty:run
```
### Start system
При запуске на локальной машине jetty начианет слушать порт 8080.
В адресной строке браузера введите 
```
http://localhost:8080/
```
Откроется простая страничка администрирования
<br>![admin page](readme/adminStart.JPG?raw=true "admin page")</br>
В форме ввода add bot form необходимо вставить имя бота и токен. 
Для получения имени и токена зарегистрируйте своего бота следуя инструкциям с официальной сайта
[Telegram](https://core.telegram.org/bots#6-botfather).
После того, как отправите данные о боте в приложение, при успешной обработке получите json ответ:
```
{"success":"success","message":"done"}
```
Теперь бот зарегистрирован в системе
### Using bot
Для старта отправьте боту команду */start*
В ответ получите приветствие и описание по использованию. Далее введите любое слово или словосочетание и , если Википедия содержит ее, то в ответ придет сообщение с кратким описанием и ссылкой на реальную страницу.
Если статья Википедии содержит в себе рекомендации к дополнительнуму прочтению какой-либо темы, то бот добавит кнопки с данными ссылками. Нажав на кнопку данное сообщение обновится новой статьей
<br>![bot](readme/bot.JPG?raw=true "bot")</br>

### Other features
#### Add new commands
Система поддерживает добавление новых команд, для этого необходимо на страничке администрирования в форме add bot commands прописать название команды и ответ на ввод этой команды.
По умолчанию добавлены только */start* и */info*.
#### Add new bots
Система поддерживает одновременную работу нескольких вики-ботов. Для добавления еще одного необходимо выполнить шаги описанные в пункте *Start system*
#### Caching
Настроено кеширование найденных статей на базе EhCache. Также в оперативной памяти хранятся добавленные команды и боты. После рестарта системы необходимо вновь вводить данные
### System architecture 
#### Components
Данное приложение состоит из нескольких модулей:
* **admin** - модуль администрирования
* **business** - модуль бизнес прослойки
* **common** - модуль для базовых компонентов
* **telegramapi** - модуль взаимодействия с telegram api
* **warpackaging** - модуль, формирует war файл, который содержит все остальные
* **wikiapi** - модуль взаимодействия с wikipedia api
#### Main frameworks
* **Spring**
* **EhCache**
### Deploy on remote server
Деплой на удаленный сервер происходит путем передачи сформированного war файла. Для его создания необходимо выполнить следующую maven команду:
```
mvn clean package
```
War файл будет находится по следующему пути: *${basedir}\warpackaging\target\war-packaging-1.0-SNAPSHOT.war*
## Author
Smirnov Victor